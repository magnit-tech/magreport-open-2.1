# Добавление новых типов фильтров

Для добавления нового типа фильтра нужно создать компонент задания специфичных для данного типа фильтра полей (разместить в ./TypeSpecificFields) и добавить его в FilterInstanceDesigner для обработки данного типа фильтра.

## Cоздание компонента для специфичных полей

### Взаимодействие с FilterInstanceDesigner

Взаимодействие с FilterInstanceDesigner происходит следующим образом: FilterInstanceDesigner передаёт в компонент объект filterInstanceData - объект данных экземпляра фильра, как он приходит от /filter-instance/get (объект data ответа). Компонент специфичных полей должен разобрать информацию там и отобразить соответствующим образом. При изменении информации в полях компонента он возывает callback с сигнатурой 

    (newFilterInstanceData, errors)

где newFilterInstanceData - измененный объект данных экземпляра фильтра (в том же формате, что и ответ от /filter-instance/get и входящий объект в /filter-instance/add и /filter-instance/edit), errors - массив или объект с текстовыми полями с информационными сообщениями об ошибках в заполнении полей. Если он не пуст, запрос на создание и редатирование экземпляра фильтра не отправляется.

### Внутреннее устройство компонента

Компоненты для специфичных полей создаются по общей схеме, в основе которой лежат две функции:

    function convertFilterToLocalData(filterInstanceData)
    function convertLocalToFilterData(filterInstanceData, localData)

преобразующие данные из формата объекта взаимодействия с сервером во внутренний формат, удобный для использования в компоненте и обратно. Функция convertLocalToFilterData предполагается возвращающей объект из 2-х полей: filterInstanceData и errors - как для передачи в callback onChange компонента.